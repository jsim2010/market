name: Partite
on:
  issues:
    types: [assigned]
  pull_request:
    types: [closed]

jobs:
  approve:
    if: ${{ github.event_name == 'issues' && github.event.action == 'assigned' }}
    runs-on: ubuntu-latest
    steps:
    - name: create branch
      run: BRANCH=${${{ github.event.issue.number }}-${{ github.event.issue.title }}// /-} && git switch -c ${BRANCH} && git push -u origin ${BRANCH}

    - name: update issue
      run: BRANCH=${${{ github.event.issue.number }}-${{ github.event.issue.title }}// /-} && git issue comment ${{ github.event.issue.number }} --body "Issue was approved and linked to created branch '${BRANCH}'"
