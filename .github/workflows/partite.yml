name: Partite
on:
  issues:
    types: [labeled]

jobs:
  approve:
    if: ${{ github.event_name == 'issues' && github.event.action == 'labeled' && github.event.label.name == 'Designing'}}
    runs-on: ubuntu-latest
    steps:
    - name: checkout project
      uses: actions/checkout@v2

    - name: create branch
      run: DEBUG="${{ github.event.label }}" && START="${{ github.event.issue.number }}-${{ github.event.issue.title }}" && BRANCH=${START// /-} && git switch -c ${BRANCH} && git push -u origin ${BRANCH}

    - name: update issue
      run: START="${{ github.event.issue.number }}-${{ github.event.issue.title }}" && BRANCH = ${START// /-} && git issue comment ${{ github.event.issue.number }} --body "Issue was approved and linked to created branch '${BRANCH}'"
